!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");r(2),AFRAME.registerComponent("star",{schema:{points:{"default":3},width:{"default":.3}},init:function(){this.el.setAttribute("faceset")},update:function(e){var t=this.el,r=this.data,n=r.points,i=r.width,a=["0 0 0"];n=Math.max(3,n);for(var s=2*Math.PI/n,o=0;o<2*Math.PI;o+=s)a.push([Math.cos(o),0,Math.sin(o)].join(" ")),a.push([i*Math.cos(o+s/2),0,i*Math.sin(o+s/2)].join(" "));t.setAttribute("faceset","vertices",a.join(", "));for(var u=[],c=0;n>c;c++)u.push([1+(2*c+1)%(2*n),0,1+(2*c+3)%(2*n)].join(" ")),u.push([1+(2*c+1)%(2*n),1+(2*c+3)%(2*n),1+(2*c+2)%(2*n)].join(" "));t.setAttribute("faceset","triangles",u.join(", "))},remove:function(){}});var n=r(1);AFRAME.registerPrimitive("a-star",AFRAME.utils.extendDeep({},n(),{defaultAttributes:{star:{points:3,width:.3}},mappings:{points:"star.points",width:"star.width"}}))},function(e,t){e.exports=function(){return{defaultAttributes:{material:{}},mappings:{color:"material.color",metalness:"material.metalness",opacity:"material.opacity",repeat:"material.repeat",roughness:"material.roughness",shader:"material.shader",side:"material.side",src:"material.src",transparent:"material.transparent"},transforms:{src:function(e){return"#"===e[0]?e:"url("+e+")"}}}}},function(e,t,r){function n(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=3)n=new THREE.Vector3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function i(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=3)n=new THREE.Face3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function a(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=2)n=new THREE.Vector2(+t[i+0],+t[i+1]),r.push(n);return r}function s(e,t,r){var n=new THREE.Geometry;if(n.vertices=e.vertices,n.computeBoundingBox(),0==e.triangles.length){for(var i=o(n),a=u(e,i),s=t.x[a],c=t.y[a],f=e.vertices.map(function(e){return[e[s]+0,e[c]+0]}),h=l.triangulate(f),p=0;p<h.length;p+=3)n.faces.push(new THREE.Face3(h[p],h[p+1],h[p+2]));return n}return n.faces=e.triangles,n}function o(e){var t=e.boundingBox,r=t.max.clone();return r.sub(t.min),r}function u(e,t){var r=e.projectdir.toLowerCase();return"x"!==r&&"y"!==r&&"z"!==r&&(r="z",t.x<t.y&&t.x<t.z&&(r="x"),t.y<t.x&&t.y<t.z&&(r="y")),r}function c(e,t,r){var n=e.uvs;if(n.length>0){for(var i=+n.length,a=i;a<t.vertices.length;a++)n.push(n[i].clone);return n}var s=o(t),c=u(e,s),f=r.x[c],l=r.y[c],h=t.vertices,p=t.boundingBox,m=p.min[f],g=p.min[l],d=[];return h.forEach(function(e){d.push(new THREE.Vector2((e[f]-m)/s[f],(e[l]-g)/s[l]))}),d}function f(e,t,r){var n=helperMatrix.makeTranslation(t.x-r.x,t.y-r.y,t.z-r.z);e.applyMatrix(n),e.verticesNeedsUpdate=!0}if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var l=r(3);AFRAME.registerComponent("faceset",{schema:{vertices:{"default":[{x:-.5,y:0,z:.5},{x:.5,y:0,z:.5},{x:.5,y:0,z:-.5},{x:-.5,y:0,z:-.5}],parse:function(e){return n(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},triangles:{"default":[],parse:function(e){return i(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},uvs:{"default":[],parse:function(e){return a(e)},stringify:function(e){return e.map(function(e){return"object"!=typeof e?e:[e.x,e.y].join(" ")}).join(",")}},crease:{"default":!1},projectdir:{type:"string","default":"auto"},translate:{type:"vec3"}},init:function(){this.dmaps={x:{x:"y",y:"x",z:"x"},y:{x:"z",y:"z",z:"y"}}},update:function(e){e=e||{};var t=this.data,r=e.translate||this.schema.translate["default"],n=AFRAME.utils.diff(e,t),i=this.el.getOrCreateObject3D("mesh",THREE.Mesh),a=i.geometry,o=!(1===Object.keys(n).length&&("translate"in n||"uvs"in n)),u=!AFRAME.utils.deepEqual(t.translate,r),l=t.vertices.length!==a.vertices.length||t.triangles.length!==a.faces.length,h="uvs"in n||l;if(o){i.geometry.dispose(),i.geometry=null;var p=i.material;a=s(this.data,this.dmaps,l),i=new THREE.Mesh(a,p),this.el.setObject3D("mesh",i),a.verticesNeedUpdate=!0}if(u&&f(a,t.translate,r),h){a.faceVertexUvs[0]=[];var m=a.faces,g=c(t,a,this.dmaps);m.forEach(function(e,t){a.faceVertexUvs[0].push([g[e.a],g[e.b],g[e.c]])}),a.uvsNeedUpdate=!0}a.mergeVertices(),a.computeFaceNormals(),a.computeVertexNormals(),t.crease&&(i.material.shading=THREE.FlatShading)},remove:function(){this.el.getObject3D("mesh").geometry.dispose=new THREE.Geometry}})},function(e,t,r){var n;!function(){"use strict";function t(e){var t,r,n,i,a,s,o=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(t=e.length;t--;)e[t][0]<o&&(o=e[t][0]),e[t][0]>c&&(c=e[t][0]),e[t][1]<u&&(u=e[t][1]),e[t][1]>f&&(f=e[t][1]);return r=c-o,n=f-u,i=Math.max(r,n),a=o+.5*r,s=u+.5*n,[[a-20*i,s-i],[a,s+20*i],[a+20*i,s-i]]}function r(e,t,r,n){var i,s,o,u,c,f,l,h,p,m,g=e[t][0],d=e[t][1],v=e[r][0],E=e[r][1],y=e[n][0],x=e[n][1],A=Math.abs(d-E),b=Math.abs(E-x);if(a>A&&a>b)throw new Error("Eek! Coincident points!");return a>A?(u=-((y-v)/(x-E)),f=(v+y)/2,h=(E+x)/2,i=(v+g)/2,s=u*(i-f)+h):a>b?(o=-((v-g)/(E-d)),c=(g+v)/2,l=(d+E)/2,i=(y+v)/2,s=o*(i-c)+l):(o=-((v-g)/(E-d)),u=-((y-v)/(x-E)),c=(g+v)/2,f=(v+y)/2,l=(d+E)/2,h=(E+x)/2,i=(o*c-u*f+h-l)/(o-u),s=A>b?o*(i-c)+l:u*(i-f)+h),p=v-i,m=E-s,{i:t,j:r,k:n,x:i,y:s,r:p*p+m*m}}function i(e){var t,r,n,i,a,s;for(r=e.length;r;)for(i=e[--r],n=e[--r],t=r;t;)if(s=e[--t],a=e[--t],n===a&&i===s||n===s&&i===a){e.splice(r,2),e.splice(t,2);break}}var a=1/1048576;n={triangulate:function(e,n){var s,o,u,c,f,l,h,p,m,g,d,v,E=e.length;if(3>E)return[];if(e=e.slice(0),n)for(s=E;s--;)e[s]=e[s][n];for(u=new Array(E),s=E;s--;)u[s]=s;for(u.sort(function(t,r){return e[r][0]-e[t][0]}),c=t(e),e.push(c[0],c[1],c[2]),f=[r(e,E+0,E+1,E+2)],l=[],h=[],s=u.length;s--;h.length=0){for(v=u[s],o=f.length;o--;)p=e[v][0]-f[o].x,p>0&&p*p>f[o].r?(l.push(f[o]),f.splice(o,1)):(m=e[v][1]-f[o].y,p*p+m*m-f[o].r>a||(h.push(f[o].i,f[o].j,f[o].j,f[o].k,f[o].k,f[o].i),f.splice(o,1)));for(i(h),o=h.length;o;)d=h[--o],g=h[--o],f.push(r(e,g,d,v))}for(s=f.length;s--;)l.push(f[s]);for(f.length=0,s=l.length;s--;)l[s].i<E&&l[s].j<E&&l[s].k<E&&f.push(l[s].i,l[s].j,l[s].k);return f},contains:function(e,t){if(t[0]<e[0][0]&&t[0]<e[1][0]&&t[0]<e[2][0]||t[0]>e[0][0]&&t[0]>e[1][0]&&t[0]>e[2][0]||t[1]<e[0][1]&&t[1]<e[1][1]&&t[1]<e[2][1]||t[1]>e[0][1]&&t[1]>e[1][1]&&t[1]>e[2][1])return null;var r=e[1][0]-e[0][0],n=e[2][0]-e[0][0],i=e[1][1]-e[0][1],a=e[2][1]-e[0][1],s=r*a-n*i;if(0===s)return null;var o=(a*(t[0]-e[0][0])-n*(t[1]-e[0][1]))/s,u=(r*(t[1]-e[0][1])-i*(t[0]-e[0][0]))/s;return 0>o||0>u||o+u>1?null:[o,u]}},e.exports=n}()}]);